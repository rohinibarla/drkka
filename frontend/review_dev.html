<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>dṛkka - Review & Replay</title>

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    /* Monospace font for code/question/answer areas */
    .code-font {
      font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
      letter-spacing: 0.5px;
    }

    /* Cursor indicator animation */
    .cursor-indicator {
      display: inline-block;
      width: 2px;
      height: 1.2em;
      background-color: #3b82f6;
      animation: blink 1s infinite;
    }

    @keyframes blink {
      0%, 50% { opacity: 1; }
      51%, 100% { opacity: 0; }
    }
  </style>
</head>
<body class="bg-slate-50 min-h-screen py-8">
  <div class="max-w-4xl mx-auto px-4">

    <!-- Page Header -->
    <div class="mb-8">
      <h1 class="text-3xl font-bold text-gray-900">Submission Review & Replay</h1>
      <p class="text-gray-600 mt-2">Load a submission JSON to replay the typing process</p>
    </div>

    <!-- JSON Input Section -->
    <div class="bg-white border border-gray-200 rounded-lg shadow-sm p-8 mb-8">
      <h2 class="text-xl font-semibold text-gray-900 mb-4">Load Submission</h2>

      <textarea
        id="json-input"
        rows="12"
        class="code-font w-full px-4 py-3 border border-gray-300 rounded-md focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:outline-none transition resize-y"
        placeholder="Paste submission JSON here..."
      ></textarea>

      <button
        id="load-btn"
        class="mt-4 bg-blue-600 hover:bg-blue-700 text-white font-medium px-6 py-2 rounded-md transition duration-200"
      >
        Load Submission
      </button>

      <div id="error-message" class="hidden mt-4 p-4 bg-red-50 border border-red-200 text-red-700 rounded-md">
      </div>
    </div>

    <!-- Submission Info Panel (Initially Hidden) -->
    <div id="info-panel" class="hidden bg-white border border-gray-200 rounded-lg shadow-sm p-8 mb-8">
      <h2 class="text-xl font-semibold text-gray-900 mb-4">Submission Details</h2>

      <div class="grid grid-cols-2 gap-4 mb-4">
        <div>
          <span class="text-sm font-medium text-gray-700">Student:</span>
          <span id="student-name" class="ml-2 text-gray-900"></span>
        </div>
        <div>
          <span class="text-sm font-medium text-gray-700">Exam ID:</span>
          <span id="exam-id" class="ml-2 text-gray-900"></span>
        </div>
        <div>
          <span class="text-sm font-medium text-gray-700">Duration:</span>
          <span id="duration" class="ml-2 text-gray-900"></span>
        </div>
        <div>
          <span class="text-sm font-medium text-gray-700">Submission Time:</span>
          <span id="submission-time" class="ml-2 text-gray-900"></span>
        </div>
      </div>

      <div class="mb-4">
        <label class="block text-sm font-medium text-gray-700 mb-2">Question</label>
        <div id="question-text" class="code-font text-sm p-4 bg-gray-50 rounded-lg border border-gray-200 whitespace-pre-wrap min-h-[60px]">
        </div>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Final Answer (Reference)</label>
        <pre id="final-answer" class="code-font text-sm p-4 bg-gray-50 rounded-lg border border-gray-200 overflow-auto max-h-48 whitespace-pre-wrap"></pre>
      </div>
    </div>

    <!-- Replay Section (Initially Hidden) -->
    <div id="replay-section" class="hidden bg-white border border-gray-200 rounded-lg shadow-sm p-8">
      <h2 class="text-xl font-semibold text-gray-900 mb-4">Typing Replay</h2>

      <textarea
        id="replay-field"
        rows="12"
        class="code-font w-full px-4 py-3 border border-gray-300 rounded-md mb-4 resize-y"
      ></textarea>

      <!-- Playback Controls -->
      <div class="flex items-center gap-4 mb-4">
        <button
          id="play-pause-btn"
          class="bg-blue-600 hover:bg-blue-700 text-white font-medium px-6 py-2 rounded-md transition duration-200"
        >
          ▶ Play
        </button>

        <div class="flex items-center gap-2">
          <label for="speed-select" class="text-sm font-medium text-gray-700">Speed:</label>
          <select
            id="speed-select"
            class="border border-gray-300 rounded-md px-4 py-2 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:outline-none"
          >
            <option value="0.5">0.5x</option>
            <option value="1" selected>1x</option>
            <option value="2">2x</option>
            <option value="4">4x</option>
            <option value="8">8x</option>
            <option value="16">16x</option>
          </select>
        </div>

        <button
          id="reset-btn"
          class="border border-gray-300 hover:bg-gray-50 font-medium px-6 py-2 rounded-md transition duration-200"
        >
          ⟲ Reset
        </button>

        <div class="flex-1"></div>

        <span id="event-counter" class="text-sm text-gray-600">
          Event 0 of 0
        </span>
      </div>

      <!-- Progress Bar -->
      <div class="w-full bg-gray-200 rounded-full h-2">
        <div
          id="progress-bar"
          class="bg-blue-600 h-2 rounded-full transition-all duration-200"
          style="width: 0%"
        ></div>
      </div>
    </div>

  </div>

  <!-- JavaScript -->
  <script src="review.js"></script>
</body>
</html>
